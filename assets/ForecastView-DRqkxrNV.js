import{g as w,u as L,W as k}from"./getTemp-Dg8oheCi.js";import{d as $,o as i,c,a as s,t as n,u as o,n as t,F as h,_ as g,r as v,g as _,h as W,p as T,i as b,b as F,e as q,f as S}from"./index-CAHG3qr3.js";const D="/weather-app/pressure.svg",I="/weather-app/humidity.svg",M="/weather-app/wind.svg",j=r=>{const e=new Date(r*1e3);return e.setHours(e.getHours()-3),e.toLocaleDateString("ru-RU",{day:"numeric",month:"long"})},V=r=>{const e=new Date(r*1e3);return e.setHours(e.getHours()-3),e.toLocaleTimeString("ru-RU",{hour:"numeric",minute:"numeric"})},B=["src","alt","title"],H={inheritAttrs:!1},N=$({...H,__name:"ForecastDay",props:{day:{}},setup(r){return(e,y)=>(i(),c(h,null,[s("div",{class:t(e.$style.tempWrapper)},[s("p",null,n(o(V)(e.day.dt)),1),s("p",null,n(o(w)(e.day.main.temp))+"°",1)],2),s("div",{class:t(e.$style.descriptionWrapper)},[s("img",{src:`https://openweathermap.org/img/wn/${e.day.weather[0].icon}@2x.png`,alt:e.day.weather[0].description,title:e.day.weather[0].description},null,8,B),s("div",{class:t(e.$style.description)},n(e.day.weather[0].description),3)],2),s("div",{class:t(e.$style.pressure)},n(e.day.main.pressure),3),s("div",{class:t(e.$style.humidity)},n(e.day.main.humidity)+"%",3),s("div",{class:t(e.$style.wind)},n(e.day.wind.speed),3),s("div",{class:t(e.$style.feelsLike)},n(o(w)(e.day.main.feels_like))+"°",3)],64))}}),C="_tempWrapper_18jq0_1",E="_descriptionWrapper_18jq0_8",A="_description_18jq0_8",O="_pressure_18jq0_25",R="_humidity_18jq0_29",U="_wind_18jq0_33",z="_feelsLike_18jq0_37",K={tempWrapper:C,descriptionWrapper:E,description:A,pressure:O,humidity:R,wind:U,feelsLike:z},Q={$style:K},G=g(N,[["__cssModules",Q],["__scopeId","data-v-6e28a29e"]]),u=r=>(T("data-v-e630666c"),r=r(),b(),r),J=u(()=>s("br",null,null,-1)),P=u(()=>s("img",{src:D,alt:"",width:"25"},null,-1)),X=u(()=>s("img",{src:I,alt:"",width:"25"},null,-1)),Y=u(()=>s("br",null,null,-1)),Z=u(()=>s("img",{src:M,alt:"",width:"25"},null,-1)),x={inheritAttrs:!1},ee=$({...x,__name:"ForecastList",props:{forecast:{}},setup(r){return(e,y)=>(i(),c("div",{class:t(e.$style.forecastList)},[(i(!0),c(h,null,v(e.forecast.list,(l,m)=>{var a,d;return i(),c("div",{class:t(e.$style.tableWrapper),key:m},[s("div",{class:t(e.$style.grid)},[s("div",{class:t(e.$style.date)},[s("span",{class:t(e.$style.day)},n(o(j)((a=l[0])==null?void 0:a.dt).split(" ")[0]),3),_(" "+n(o(j)((d=l[0])==null?void 0:d.dt).split(" ")[1]),1)],2),s("div",{class:t(e.$style.pressure)},[s("span",{class:t(e.$style.descText)},[_(" Давление,"),J,_(" мм рт. ст. ")],2),P],2),s("div",{class:t(e.$style.humidity)},[s("span",{class:t(e.$style.descText)}," Влажность ",2),X],2),s("div",{class:t(e.$style.wind)},[s("span",{class:t(e.$style.descText)},[_(" Ветер,"),Y,_(" м/с ")],2),Z],2),s("div",{class:t(e.$style.feelsLike)},[s("span",{class:t(e.$style.descText)}," Ощущается как ",2)],2),s("div",{class:t(e.$style.space)},null,2),(i(!0),c(h,null,v(l,p=>(i(),W(G,{key:p.dt,day:p},null,8,["day"]))),128))],2)],2)}),128))],2))}}),se="_forecastList_jn1df_1",te="_tableWrapper_jn1df_6",re="_grid_jn1df_12",ae="_date_jn1df_21",ne="_day_jn1df_26",ie="_pressure_jn1df_29",oe="_humidity_jn1df_32",ce="_wind_jn1df_35",de="_feelsLike_jn1df_38",le="_space_jn1df_41",pe="_descText_jn1df_46",_e={forecastList:se,tableWrapper:te,grid:re,date:ae,day:ne,pressure:ie,humidity:oe,wind:ce,feelsLike:de,space:le,descText:pe},ue={$style:_e},ye=g(ee,[["__cssModules",ue],["__scopeId","data-v-e630666c"]]),me={key:0},fe={key:1},he=$({__name:"ForecastView",setup(r){const{coordsStore:{coordinates:e}}=F(),{data:y,isLoading:l,isError:m}=L({queryKey:["forecast",e],queryFn:async()=>await k.getForecast(e.latitude,e.longitude),select(a){if(a){let d=[],p=Object.groupBy(a.list,({dt_txt:f})=>f.split(" ")[0]);for(const f in p)d.push(p[f]);return{...a,list:d}}else return a}});return(a,d)=>o(l)?(i(),c("div",me,"Loading...")):o(m)?(i(),c("div",fe,"Error")):o(y)?(i(),c("div",{key:2,class:t(a.$style.container)},[q(ye,{forecast:o(y)},null,8,["forecast"])],2)):S("",!0)}}),$e="_container_724br_1",ge={container:$e},we={$style:ge},Le=g(he,[["__cssModules",we],["__scopeId","data-v-c730eef2"]]);export{Le as default};
