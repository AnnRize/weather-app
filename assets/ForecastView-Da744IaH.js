import{u as b,W as L}from"./weather.service-qyPcLngz.js";import{d as $,o as i,c as l,a as s,t as o,u as n,n as t,F as f,_ as h,r as g,f as u,g as W,p as F,h as q,i as S,b as D,e as M}from"./index-DgestkIl.js";const k=r=>{const e=new Date(r*1e3);return e.setHours(e.getHours()-3),e.toLocaleDateString("ru-RU",{day:"numeric",month:"long"})},v=r=>{const e=Math.round(r);return e>0?"+"+e:e},I=r=>{const e=new Date(r*1e3);return e.setHours(e.getHours()-3),e.toLocaleTimeString("ru-RU",{hour:"numeric",minute:"numeric"})},T=["src","alt","title"],V={inheritAttrs:!1},B=$({...V,__name:"ForecastDay",props:{day:{}},setup(r){return(e,_)=>(i(),l(f,null,[s("div",{class:t(e.$style.tempWrapper)},[s("p",null,o(n(I)(e.day.dt)),1),s("p",null,o(n(v)(e.day.main.temp))+"°",1)],2),s("div",{class:t(e.$style.descriptionWrapper)},[s("img",{src:`https://openweathermap.org/img/wn/${e.day.weather[0].icon}@2x.png`,alt:e.day.weather[0].description,title:e.day.weather[0].description,width:"80"},null,8,T),s("div",{class:t(e.$style.description)},o(e.day.weather[0].description),3)],2),s("div",{class:t(e.$style.pressure)},o(e.day.main.pressure),3),s("div",{class:t(e.$style.humidity)},o(e.day.main.humidity)+"%",3),s("div",{class:t(e.$style.wind)},o(e.day.wind.speed),3),s("div",{class:t(e.$style.feelsLike)},o(n(v)(e.day.main.feels_like))+"°",3)],64))}}),H="_tempWrapper_gqsls_1",N="_descriptionWrapper_gqsls_7",C="_description_gqsls_7",E="_pressure_gqsls_17",j="_humidity_gqsls_21",A="_wind_gqsls_25",O="_feelsLike_gqsls_29",R={tempWrapper:H,descriptionWrapper:N,description:C,pressure:E,humidity:j,wind:A,feelsLike:O},U={$style:R},z=h(B,[["__cssModules",U],["__scopeId","data-v-14f580ec"]]),w=r=>(F("data-v-d20664e6"),r=r(),q(),r),K=w(()=>s("br",null,null,-1)),Q=w(()=>s("br",null,null,-1)),G={inheritAttrs:!1},J=$({...G,__name:"ForecastList",props:{forecast:{}},setup(r){return(e,_)=>(i(),l("div",{class:t(e.$style.forecastList)},[(i(!0),l(f,null,g(e.forecast.list,(d,y)=>{var a,c;return i(),l("div",{class:t(e.$style.tableWrapper),key:y},[s("div",{class:t(e.$style.grid)},[s("div",{class:t(e.$style.date)},[s("span",null,o(n(k)((a=d[0])==null?void 0:a.dt).split(" ")[0]),1),u(" "+o(n(k)((c=d[0])==null?void 0:c.dt).split(" ")[1]),1)],2),s("div",{class:t(e.$style.pressure)},[u(" Давление,"),K,u(" мм рт. ст. ")],2),s("div",{class:t(e.$style.humidity)},"Влажность",2),s("div",{class:t(e.$style.wind)},[u(" Ветер,"),Q,u(" м/с ")],2),s("div",{class:t(e.$style.feelsLike)},"Ощущается как",2),s("div",{class:t(e.$style.space)},null,2),(i(!0),l(f,null,g(d,p=>(i(),W(z,{key:p.dt,day:p},null,8,["day"]))),128))],2)],2)}),128))],2))}}),P="_forecastList_b8p9k_1",X="_tableWrapper_b8p9k_6",Y="_grid_b8p9k_12",Z="_date_b8p9k_20",x="_pressure_b8p9k_27",ee="_humidity_b8p9k_30",se="_wind_b8p9k_33",te="_feelsLike_b8p9k_36",re="_space_b8p9k_39",ae={forecastList:P,tableWrapper:X,grid:Y,date:Z,pressure:x,humidity:ee,wind:se,feelsLike:te,space:re},oe={$style:ae},ie=h(J,[["__cssModules",oe],["__scopeId","data-v-d20664e6"]]),ne={key:0},le={key:1},ce=$({__name:"ForecastView",setup(r){const{coordsStore:{coordinates:e}}=S(),{data:_,isLoading:d,isError:y}=b({queryKey:["forecast",e.latitude,e.longitude],queryFn:async()=>(console.log("load"),await L.getForecast()),select(a){if(a){let c=[],p=Object.groupBy(a.list,({dt_txt:m})=>m.split(" ")[0]);for(const m in p)c.push(p[m]);return{...a,list:c}}else return a}});return(a,c)=>n(d)?(i(),l("div",ne,"Loading...")):n(y)?(i(),l("div",le,"Error")):n(_)?(i(),l("div",{key:2,class:t(a.$style.container)},[D(ie,{forecast:n(_)},null,8,["forecast"])],2)):M("",!0)}}),de="_container_724br_1",pe={container:de},ue={$style:pe},me=h(ce,[["__cssModules",ue],["__scopeId","data-v-4e90d13b"]]);export{me as default};
